# TASK-0001.2.1.5: Progress & Error Handling

**Parent**: [STORY-0001.2.1](README.md)
**Status**: ðŸ”µ Not Started
**Estimated Hours**: 4
**Actual Hours**: -

## Implementation Checklist

- [ ] Define WalkProgress dataclass
  - [ ] commits_seen, total_commits, unique_blobs_found
  - [ ] current_commit_date, current_commit_sha, current_commit_message
- [ ] Implement progress_callback parameter
  - [ ] Invoke every 10 commits (avoid excessive overhead)
  - [ ] Pass WalkProgress with current metrics
  - [ ] Make callback optional (None = no progress reporting)
- [ ] Define WalkStats and WalkError dataclasses
- [ ] Implement graceful error handling
  - [ ] Catch exceptions during blob processing
  - [ ] Log error to WalkStats.errors
  - [ ] Continue processing other blobs
- [ ] Define error types
  - [ ] "corrupt_blob" - Can't read blob content
  - [ ] "oversized_blob" - Exceeds size limit
  - [ ] "lfs_pointer" - Git LFS file detected
  - [ ] "missing_parent" - Broken history
- [ ] Return WalkStats after walk complete
- [ ] Tests pass
- [ ] Documentation updated

## Pattern Reuse

**Similar Patterns:**
- Progress callbacks are standard Python pattern (no new abstraction needed)
- Error collection follows pytest fixture pattern (list of errors)

## Test Requirements

**Unit Tests** (tests/unit/core/test_progress.py):
- Progress callback invoked correctly
- WalkProgress contains accurate data
- Callback invoked every 10 commits

**Unit Tests** (tests/unit/core/test_error_handling.py):
- Corrupt blob skipped, error logged
- Walk continues after errors
- WalkStats contains all errors
- Each error has blob SHA, commit SHA, message

## Verification Criteria

- Progress callback provides rich UX (commits, blobs, current commit info)
- Errors don't stop the walk (graceful degradation)
- All errors captured in WalkStats for user review
- Callback overhead minimal (invoke every 10 commits, not every blob)

## Files to Create/Modify

- `src/gitctx/core/commit_walker.py` (extend - add progress and error handling)
- `src/gitctx/core/models.py` (extend - WalkProgress, WalkStats, WalkError)
- `tests/unit/core/test_progress.py` (new)
- `tests/unit/core/test_error_handling.py` (new)

## Dependencies

- TASK-0001.2.1.1, 0001.2.1.2, 0001.2.1.3, 0001.2.1.4 complete (walker implementation done)

---

**Created**: 2025-10-06
**Last Updated**: 2025-10-06
