# TASK-0001.1.2.9: Create Configuration User Documentation

**Parent Story**: [STORY-0001.1.2](README.md)
**Status**: âœ… Complete
**Estimated Hours**: 1.0
**Actual Hours**: 1.0

## Objective

Create comprehensive user-facing documentation for gitctx configuration system covering all options, environment variables, security best practices, and troubleshooting.

## Context

Users need clear documentation explaining how to configure gitctx, what options are available, security considerations, and how to solve common problems.

## Implementation Checklist

- [x] Create `docs/configuration.md` with complete guide
- [x] Document all config options with descriptions and examples
- [x] Create environment variable reference table
- [x] Add security best practices section
- [x] Add troubleshooting guide for common errors
- [x] Document cross-platform differences (Windows/macOS/Linux)
- [x] Add examples for common use cases
- [x] Link from main README if appropriate

## Acceptance Criteria

- Complete configuration reference exists
- All config options documented with examples
- Environment variables listed in reference table
- Security guidance is clear and actionable
- Troubleshooting covers common scenarios
- Platform differences explained
- Documentation is clear and well-organized

## File to Create

- [docs/configuration.md](../../../../../docs/configuration.md) - New user documentation

## Technical Notes

**Documentation Structure**:

```markdown
# Configuration Guide

## Overview
Brief introduction to gitctx configuration system.

## Quick Start
Common configuration examples to get started quickly.

## Configuration Files

### User Config (~/.gitctx/config.yml)
Stores API keys and user preferences.

### Repo Config (.gitctx/config.yml)
Stores team settings, safe to commit.

## Configuration Options

### API Keys
- `api_keys.openai` - OpenAI API key for embeddings (string)
  - Example: `sk-abc123...`
  - Security: Never commit to repo

### Search Settings
- `search.limit` - Max results to return (integer, 1-100, default: 10)
  - Example: `20`
- `search.context_lines` - Lines of context (integer, 0-10, default: 3)

### Index Settings
- `index.chunk_size` - Token chunk size (integer, 100-2000, default: 500)
- `index.overlap` - Chunk overlap (integer, 0-500, default: 50)

### Model Settings
- `model.embedding` - Embedding model (string, default: "text-embedding-3-small")
- `model.temperature` - Temperature (float, 0.0-2.0, default: 0.0)

## Environment Variables

| Variable | Config Key | Description |
|----------|-----------|-------------|
| `OPENAI_API_KEY` | `api_keys.openai` | OpenAI API key (user config) |
| `GITCTX_SEARCH__LIMIT` | `search.limit` | Search result limit (repo config) |
| `GITCTX_SEARCH__CONTEXT_LINES` | `search.context_lines` | Context lines (repo config) |

**Precedence**: Environment variables override config files.

## Security Best Practices

### API Key Safety
1. **Never commit API keys**: User config is `.gitignore`d
2. **Use environment variables**: `OPENAI_API_KEY` in production
3. **Check file permissions**: `~/.gitctx/config.yml` should be `0600`
4. **Rotate keys regularly**: Update in case of exposure

### File Permissions
- User config: `0600` (read/write owner only)
- Repo config: `0644` (readable by all, writable by owner)

## Cross-Platform Notes

### Windows
- User config: `%USERPROFILE%\.gitctx\config.yml`
- File permissions use ACLs (not Unix-style)
- Use PowerShell or cmd.exe for commands

### macOS/Linux
- User config: `~/.gitctx/config.yml`
- File permissions: Standard Unix (600/644)
- Use terminal for commands

## Troubleshooting

### "Permission denied" error
**Problem**: Config file has wrong permissions or is read-only.
**Solution**: Check file permissions: `ls -la ~/.gitctx/config.yml`

### "Invalid value" error
**Problem**: Config value doesn't match expected type.
**Solution**: Check type (int vs string) and range constraints.

### "Config file not found"
**Problem**: Config file doesn't exist.
**Solution**: Run `gitctx config init` to create `.gitctx/`

### API key not working
**Problem**: API key not loaded correctly.
**Solution**:
1. Check file exists: `ls ~/.gitctx/config.yml`
2. Verify permissions: Should be `600`
3. Try environment variable: `export OPENAI_API_KEY=sk-...`

## Examples

### Basic Setup
\`\`\`bash
# Initialize repo config
gitctx config init

# Set API key
gitctx config set api_keys.openai sk-abc123...

# Set search limit
gitctx config set search.limit 20
\`\`\`

### Team Configuration
\`\`\`bash
# In .gitctx/config.yml (safe to commit)
search:
  limit: 25
  context_lines: 5

index:
  chunk_size: 1000
  overlap: 100
\`\`\`

### Environment Variables
\`\`\`bash
# Set API key via environment
export OPENAI_API_KEY=sk-abc123...

# Override search limit for this session
export GITCTX_SEARCH__LIMIT=50
\`\`\`
```

## Definition of Done

- [x] `docs/configuration.md` created with all sections
- [x] All config options documented
- [x] Environment variables listed
- [x] Security guidance included
- [x] Troubleshooting section complete
- [x] Examples provided
- [x] Task marked complete in story README
