# EPIC-0001.1: CLI Foundation

**Parent Initiative**: [INIT-0001](../README.md)  
**Status**: ðŸ”µ Not Started  
**Estimated**: 13 story points  
**Progress**: â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 0%

## Overview

Build the complete command-line interface with all commands working against mocked implementations. This allows immediate user testing and establishes the interface contract before implementing the backend.

## Goals

- Users can run `gitctx` commands immediately
- All commands have proper help text and error handling  
- Git-like interface patterns established
- Configuration management working
- Progress indicators and formatting in place

## Child Stories

| ID | Title | Status | Points |
|----|-------|--------|--------|
| [STORY-0001.1.0](../stories/STORY-0001.1.0.md) | Development Environment Setup | ðŸ”µ Not Started | 5 |
| [STORY-0001.1.1](../stories/STORY-0001.1.1.md) | CLI Framework Setup | ðŸ”µ Not Started | 3 |
| [STORY-0001.1.2](../stories/STORY-0001.1.2.md) | Config Command | ðŸ”µ Not Started | 3 |
| [STORY-0001.1.3](../stories/STORY-0001.1.3.md) | Index Command (Mocked) | ðŸ”µ Not Started | 2 |
| [STORY-0001.1.4](../stories/STORY-0001.1.4.md) | Search Command (Mocked) | ðŸ”µ Not Started | 3 |
| [STORY-0001.1.5](../stories/STORY-0001.1.5.md) | Clear Command | ðŸ”µ Not Started | 2 |

## BDD Specifications

See [tests/e2e/features/cli.feature](../../../../tests/e2e/features/cli.feature) for the complete BDD scenarios for this epic.

## Technical Design

### Command Structure

```python
# src/gitctx/cli/main.py
import typer
from rich.console import Console

app = typer.Typer(
    name="gitctx",
    help="Context optimization engine for coding workflows",
    add_completion=False,
)
console = Console()

@app.command()
def index(
    verbose: bool = typer.Option(False, "--verbose", "-v"),
    force: bool = typer.Option(False, "--force", "-f"),
):
    """Index the repository for searching."""
    # Mock implementation
    
@app.command()
def search(
    query: str,
    limit: int = typer.Option(10, "--limit", "-n"),
):
    """Search the indexed repository."""
    # Mock implementation

@app.command()
def config():
    """Manage configuration."""
    # Sub-commands for get/set/list
    
@app.command()
def clear(
    force: bool = typer.Option(False, "--force", "-f"),
):
    """Clear cache and embeddings."""
    # Implementation
```

### Configuration Management

```python
# src/gitctx/cli/config.py
class Config:
    def __init__(self):
        self.path = Path.home() / ".gitctx" / "config.yml"
    
    def set(self, key: str, value: str):
        """Set a config value using dot notation."""
    
    def get(self, key: str) -> str:
        """Get a config value, checking env vars first."""
    
    def list(self) -> list[str]:
        """Get all config values, checking env vars first."""
```

## Dependencies

- `typer[all]` - CLI framework with completion
- `rich` - Terminal formatting and progress bars
- `pyyaml` - Configuration file management

## Success Criteria

1. **All commands executable** - Even with mocked implementations
2. **Git-like interface** - Consistent with git patterns
3. **Rich terminal output** - Progress bars, colors, formatting
4. **Configuration working** - API keys can be set and retrieved
5. **BDD tests passing** - All Gherkin scenarios pass

## Performance Targets

- CLI startup: <100ms
- Command response: <50ms for simple commands
- Help display: <20ms

## Notes

- This epic establishes the interface contract
- Mock implementations allow immediate user testing
- Focus on UX patterns that will persist through development
- All error messages and help text should be finalized here

---

**Created**: 2025-09-28  
**Last Updated**: 2025-09-28
