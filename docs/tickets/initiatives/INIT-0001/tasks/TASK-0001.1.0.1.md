# TASK-0001.1.0.1: Project Structure Setup

**Parent Story**: [STORY-0001.1.0](../stories/STORY-0001.1.0.md)  
**Status**: ðŸ”µ Not Started  
**Estimated Hours**: 2  
**Actual Hours**: -

## Description

Create the foundational project directory structure following Python best practices. Set up the package structure with proper `__init__.py` files and entry points for the CLI application.

## Implementation Checklist

- [ ] Create `src/gitctx/` package directory structure
- [ ] Add `__init__.py` files with proper `__version__` export
- [ ] Create `__main__.py` for package execution
- [ ] Set up `cli/` subdirectory for CLI commands
- [ ] Create `core/` subdirectory for business logic (placeholder)
- [ ] Set up basic entry point that prints version
- [ ] Verify package is importable: `python -c "import gitctx"`

## TDD Requirements

### Test First (RED)

```python
# tests/unit/test_package.py
def test_package_has_version():
    """Test that package exports version."""
    import gitctx
    assert hasattr(gitctx, "__version__")
    assert isinstance(gitctx.__version__, str)
    assert gitctx.__version__  # Not empty

def test_main_entry_point_exists():
    """Test that __main__ can be executed."""
    import subprocess
    result = subprocess.run(
        ["python", "-m", "gitctx", "--version"],
        capture_output=True,
        text=True
    )
    assert result.returncode == 0
    assert "gitctx" in result.stdout.lower()

def test_cli_module_exists():
    """Test that CLI module can be imported."""
    from gitctx.cli import main
    assert main is not None
```

### Implementation (GREEN)

Create the minimal structure to make tests pass:

```python
# src/gitctx/__init__.py
__version__ = "0.1.0"

# src/gitctx/__main__.py
from gitctx.cli.main import app
import typer

if __name__ == "__main__":
    app()

# src/gitctx/cli/__init__.py
from .main import app

__all__ = ["app"]

# src/gitctx/cli/main.py
import typer
from gitctx import __version__

app = typer.Typer(
    name="gitctx",
    help="Context optimization engine for coding workflows",
    add_completion=False,
)

def version_callback(value: bool):
    if value:
        typer.echo(f"gitctx version {__version__}")
        raise typer.Exit()

@app.callback()
def main(
    version: bool = typer.Option(
        None,
        "--version",
        callback=version_callback,
        is_eager=True,
        help="Show version",
    ),
):
    """gitctx - Context optimization engine for coding workflows."""
    pass
```

### Refactor

- Ensure all imports are at module level
- Add type hints where appropriate
- Follow PEP 8 naming conventions

## File Structure to Create

```bash
src/
â””â”€â”€ gitctx/
    â”œâ”€â”€ __init__.py          # Package init with __version__
    â”œâ”€â”€ __main__.py          # Entry point for python -m gitctx
    â”œâ”€â”€ cli/
    â”‚   â”œâ”€â”€ __init__.py      # Export app
    â”‚   â””â”€â”€ main.py          # Typer app definition
    â”œâ”€â”€ core/
        â””â”€â”€ __init__.py      # Empty for now
```

## Acceptance Criteria

- [ ] Package structure follows Python standards
- [ ] `pipx install . --editable` installs gitctx for use in developer machine with "editable" install
- [ ] `gitctx --version` displays version
- [ ] All `__init__.py` files in place
- [ ] Package can be imported without errors
- [ ] Unit tests pass for package structure

## Dependencies

- Directory creation tools (mkdir, touch)
- Python 3.11+ for testing imports

## Testing Commands

```bash
# After implementation
cd gitctx
python -c "import sys; sys.path.insert(0, 'src'); import gitctx; print(gitctx.__version__)"
pipx install . --editable
uv run pytest tests/unit/test_package.py -v
gitctx --version
```

## Notes

- Keep initial implementation minimal - just enough to pass tests
- Don't add features not required by tests
- This establishes the foundation for all future CLI work
- Follow the exact structure - it will be referenced by other tasks

---

**Created**: 2025-09-28  
**Last Updated**: 2025-09-28
